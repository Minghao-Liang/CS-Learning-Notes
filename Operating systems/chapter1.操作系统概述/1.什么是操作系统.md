# 什么是操作系统

首先我们来看看最开始的问题：什么是操作系统？操作系统是一个软件，帮助用户和应用程序使用和管理计算机资源。最简单的例子，我们平时电脑使用的Windows就是操作系统。当然，操作系统远远不止个人电脑的操作系统，嵌入式设备、智能手机、服务器和巨型机这些都有操作系统。

或许我们很难想象没有操作系统的计算机，但是早期的计算机确实是没有操作系统的，现在我们就来简单地看一看操作系统的历史。

1940s，计算机没有操作系统，正是这个时代，著名的ENIAC诞生了，世界进入了拥有通用计算机的时代。这个时代的计算机能跑程序就很不错了，不需要操作系统画蛇添足。

1950s，操作系统的概念开始出现了，这时候有批处理系统，操作系统用来管理很多个程序的排队运行。

1960s出现了进程的概念，同时各种调度策略应运而生，现代操作系统开始诞生，比如Multics。

从1970s开始就更不用说了，集成电路的快速发展，个人电脑兴起，计算机蓬勃发展，著名的苹果公司也是在这一时期开始推出自己的各种现象级产品。C语言、Unix系统、GNU等开始诞生。

从此之后，操作系统快速发展，到了今天已经极为复杂。

那么操作系统到底是怎么样的？其实可以把操作系统看成是应用程序和硬件之间插入的一层软件，所有应用程序对硬件的操作都要通过操作系统，后面我们会看到这样做的好处。这里借用一幅著名的图来看看应用程序、操作系统以及硬件之间的关系。

<img src="https://rcore-os.github.io/rCore-Tutorial-Book-v3/_images/computer-hw-sw.png" alt="computer-hw-sw.png (1032×534) (rcore-os.github.io)" style="zoom: 33%;" />



事实上，操作系统是一个非常复杂的系统，xv6大概有1万行代码左右，而Windows的最新的几个版本，甚至是达到了数千万行代码。如此复杂的系统该如何构建？又该如何维护和使用？其实在过去的几十年里，人们在设计操作系统的时候引入了分层的思想，并且取得了巨大的成功。

在这里我们来看看操作系统的基本组织结构是什么样的，上图我们可以看到应用程序、操作系统和硬件三者的分层关系，如果我们把计算机当作一个矩形的话，下面就是硬件资源，包括了CPU、內存等资源，而最上层我们会运行编译器、文本编辑器等各式各样的应用程序。很显然，这些所谓的应用程序是运行在同一个空间中的，我们把这个空间称为用户空间。

区别于用户空间，我们还会有一个kernel，这其实是是一个特殊的程序，也叫做内核，它是计算机资源的管理者，当你打开计算机时，内核总是第一个启动的程序。通过内核我们可以管理用户空间的进程、管理硬件资源，而且内核会与用户空间中的程序以及硬件进行交互。

至于是如何交互的？其实我们是通过接口来进行应用程序对内核的访问，这里又称为API，在后面我们会谈到系统调用，这其实和函数调用类似，区别在于，系统调用会实际运行在系统内核中，并在内核中实现一些东西。

